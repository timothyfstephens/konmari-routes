<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Konmari::Routes::Loader
  
    &mdash; Documentation by YARD 0.9.24
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Konmari::Routes::Loader";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (L)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Konmari.html" title="Konmari (module)">Konmari</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Routes.html" title="Konmari::Routes (module)">Routes</a></span></span>
     &raquo; 
    <span class="title">Loader</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Konmari::Routes::Loader
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Konmari::Routes::Loader</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/konmari/routes/loader.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Given a routes directory, recursively load all routes.</p>

<p>Recursively loads all routes in a directory following this algorithm:</p>
<ol><li>
<p>Load the files in each directory that match PRIORITY_FILES in order listed</p>
</li><li>
<p>Load each directory, opening a *new namespace* matching the directory name,
and start back at step 1</p>
</li><li>
<p>Load all other files in alphabetical order</p>
</li></ol>

<p>Be aware that any routes will be respected in the order they are loaded
Routes files must use extension <code>.routes</code></p>

<p>Example file structure:</p>

<pre class="code ruby"><code class="ruby">|- routes/
|  |- index.routes
|  |- comments.routes
|  |- users/
|     |- index.routes
|     |- friends.routes</code></pre>

<p>Analogous routes definitions</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_application'>application</span><span class='period'>.</span><span class='id identifier rubyid_routes'>routes</span><span class='period'>.</span><span class='id identifier rubyid_draw'>draw</span> <span class='kw'>do</span>
  <span class='comment'># all index routes
</span>  <span class='comment'># all comments routes (likely a resource, *must* have first code line of `resource/namespace :comments`)
</span>  <span class='id identifier rubyid_namespace'>namespace</span> <span class='symbol'>:users</span> <span class='kw'>do</span>
    <span class='comment'># all index routes from `index.routes` file in `users/`
</span>    <span class='comment'># all friends routes from `friends.routes` in `users/`
</span>  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>The <code>friends.routes</code> file could then be as simple as:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># routes/users/friends.routes
</span><span class='comment'># NOTE: the resource matches the filename
</span><span class='id identifier rubyid_resources'>resources</span> <span class='symbol'>:friends</span><span class='comma'>,</span> <span class='label'>only:</span> <span class='lbracket'>[</span><span class='symbol'>:index</span><span class='comma'>,</span> <span class='symbol'>:create</span><span class='comma'>,</span> <span class='symbol'>:delete</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>path:</span> <span class='symbol'>:my_friends</span> <span class='comment'># or any other options passed to resource(s)
</span></code></pre>

<p>Point being, declaring the namespace is unnecessary.  This gives us the
<em>huge</em> advantage of being able to have our routes files
<em>exactly</em> match the file heirarchy of our controllers.  We also have
the flexibility, through the prioritized files, to add any other routes we
might need without being restrained by the filename constraint.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="PRIORITY_FILES-constant" class="">PRIORITY_FILES =
          <div class="docstring">
  <div class="discussion">
    
<p>The list of filenames which are exempt from the resource name matching
rule, and are always loaded first in any directory they are seen in.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span>
  <span class='symbol'>:priority</span><span class='comma'>,</span>
  <span class='symbol'>:redirects</span><span class='comma'>,</span>
  <span class='symbol'>:index</span>
<span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(config)  &#x21d2; Loader </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Loader.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(config)  &#x21d2; <tt><span class='object_link'><a href="" title="Konmari::Routes::Loader (class)">Loader</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Loader.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/konmari/routes/loader.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@app</span>           <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_application'>application</span>
  <span class='ivar'>@routes_folder</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_routes_path'>routes_path</span>
  <span class='ivar'>@logger</span>        <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span>
  <span class='id identifier rubyid_build_routes'>build_routes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


</div>

      <div id="footer">
  Generated on Sat Feb  1 19:49:32 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.3.8).
</div>

    </div>
  </body>
</html>